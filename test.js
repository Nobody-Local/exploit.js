if (location.host != "chrome.google.com" || !location.pathname.startsWith("/webstore")) {
    alert("IMPORTANT PLS READ: After clicking OK, if it takes you to a 404, you are good. Click the bookmarklet once more after doing that.");
    location.href = "https://chrome.google.com/webstorex";
}
document.head.innerHTML = `
<style>
    body {
        margin: 8px;
    }
    .extensions {
        width: 100%;
    }
    .extensions .name {
        display: block;
        padding: 5px;
        width: 60%;
    }
</style>
`
document.body = document.createElement("body");

document.toggleFunction = (id) => {
  var clickedRow = document.getElementById(id);
  chrome.management.setEnabled(id, clickedRow.children[0].children[0].children[0].checked);
};

document.newBodyData = '<div class="extensions">'

chrome.management.getAll(function() {
  arguments[0].forEach((extension) => {
    document.newBodyData += `<div id="${extension.id}"><div class="name ${extension.enabled ? 'yes' : 'no'}" onclick="toggleFunction('${extension.id}')">${extension.name} / ID: ${extension.id}</div><div class="by">${extension.installType}</div></div><br>`;
  });
	
  document.newBodyData += "</div>"
  document.body.innerHTML = document.newBodyData;
});
