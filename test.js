if (location.host != "chrome.google.com" || !location.pathname.startsWith("/webstore")) {
    alert("IMPORTANT PLS READ: After clicking OK, if it takes you to a 404, you are good. Click the bookmarklet once more after doing that.");
    location.href = "https://chrome.google.com/webstorex";
}
document.head.innerHTML = `
<style>
body {
    margin: 8px;
}
.extensions {
    width: 100%;
}
.extensions .name.yes::before {
    content: "ON ";
    color: rgb(0, 255, 55);
}
.extensions .name.no::before {
    content: "OFF ";
    color: rgb(128, 128, 128);
}
.extensions .name {
    display: block;
    padding: 5px;
    width: 60%;
    border: 1px solid #000;
    border-radius: 5px;
    transition: all .7s;
    cursor: pointer;
}
.extensions .name:hover {
    background: rgb(128, 128, 128);
    color: #fff;
}
</style>
`
document.body = document.createElement("body");
/* 
function toggleFunction(id) {
  var clickedRow = document.getElementById(id);
  chrome.management.setEnabled(id, clickedRow.children[0].children[0].children[0].classList.toggle("yes") && clickedRow.children[0].children[0].children[0].classList.toggle("no"));
};
 */
function settings(id) {
    chrome.management.setEnabled(id ,!1);
}

document.newBodyData = '<div class="extensions">'

chrome.management.getAll(function() {
  arguments[0].forEach((extension) => {
    document.newBodyData += `<div id="${extension.id}"><div class="name ${extension.enabled ? 'yes' : 'no'}" title="${extension.id}">${extension.name} - Installed By ${extension.installType}</div></div><br>`;
    document.querySelector(`#${extension.id}`).querySelector(".name").addEventListener("click", () => {
        alert(`${extension.id}`);
    })
  });
	
  document.newBodyData += "</div>"
  document.body.innerHTML = document.newBodyData;
});
